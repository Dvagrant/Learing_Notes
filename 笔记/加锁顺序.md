加锁的原则：
1. 加锁的基本单位是 next-key lock，前开后闭区间
2. 查找过程中扫描到的对象才会加锁（查询使用覆盖索引时，不会往主键索引上加锁。**如果你要用 lock in share mode 来给行加读锁避免数据被更新的话，就必须得绕过覆盖索引的优化**
3. 索引上的等值查询，给唯一索引加锁的时候，next-key lock 退化为行锁
4. 索引上的等值查询，向右遍历时且最后一个值不满足等值条件的时候，next-key lock 退化为间隙锁
5. 唯一索引上的范围查询会访问到不满足条件的第一个值为止